{% extends 'hms/base.html' %}
{% block content %}

<!-- Hero Section -->
<div class="spare-parts-hero mb-5 position-relative overflow-hidden" style="background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%); border-radius: 25px; padding: 60px 40px;">
  <div class="row align-items-center">
    <div class="col-md-8">
      <h1 class="text-white fw-bold mb-3">
        <i class="fas fa-cogs me-3" style="color: #fbbf24;"></i>Premium Spare Parts Store
      </h1>
      <p class="text-white mb-4" style="font-size: 1.1rem; opacity: 0.95;">
        Genuine OEM parts and certified aftermarket components with warranty. Browse our extensive inventory of quality automotive parts.
      </p>
      <div class="d-flex gap-3 flex-wrap">
        <span class="badge px-4 py-2" style="background: rgba(255,255,255,0.2); font-size: 0.9rem;">
          <i class="fas fa-shield-alt me-2"></i>Warranty Included
        </span>
        <span class="badge px-4 py-2" style="background: rgba(255,255,255,0.2); font-size: 0.9rem;">
          <i class="fas fa-truck me-2"></i>Free Installation
        </span>
        <span class="badge px-4 py-2" style="background: rgba(255,255,255,0.2); font-size: 0.9rem;">
          <i class="fas fa-certificate me-2"></i>Certified Quality
        </span>
      </div>
    </div>
    <div class="col-md-4 text-center">
      <div class="p-4 rounded-4" style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px);">
        <h2 class="text-white fw-bold mb-2">5000+</h2>
        <p class="text-white mb-0">Parts in Stock</p>
      </div>
    </div>
  </div>
</div>

<!-- Search and Filter Bar -->
<div class="search-filter-section mb-4">
  <div class="card border-0 shadow-sm">
    <div class="card-body p-4">
      <div class="row g-3 align-items-center">
        <div class="col-md-6">
          <form class="d-flex" method="get">
            <div class="input-group input-group-lg">
              <span class="input-group-text bg-primary text-white border-0">
                <i class="fas fa-search"></i>
              </span>
              <input name="q" class="form-control border-0 shadow-sm" placeholder="Search parts by name, category, or car brand..." value="{{ request.args.get('q','') }}" style="font-size: 1rem;">
              <button class="btn btn-primary px-4" type="submit">Search</button>
            </div>
          </form>
        </div>
        <div class="col-md-6">
          <div class="d-flex gap-2 justify-content-md-end flex-wrap">
            <button class="btn btn-outline-primary" data-category="all">
              <i class="fas fa-th me-2"></i>All Parts
            </button>
            <a href="tel:+919997612579" class="btn btn-success">
              <i class="fas fa-phone me-2"></i>Call to Order
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Parts Categories Grid -->
<div class="row g-4 mb-5">
  <div class="col-12">
    <h3 class="fw-bold mb-4">
      <i class="fas fa-layer-group me-2 text-primary"></i>Browse by Category
    </h3>
  </div>

  {% if categories %}
  <!-- Database-driven categories -->
  {% for category in categories %}
  <div class="col-md-6 col-lg-3">
    <div class="parts-category-card card h-100 border-0 shadow-lg position-relative overflow-hidden" style="transition: all 0.4s ease; cursor: pointer; border-radius: 20px;">
      <div class="position-relative overflow-hidden" style="height: 240px;">
        <img src="{{ category.image_url }}" alt="{{ category.name }}" class="img-fluid w-100 h-100" style="object-fit: cover; transition: transform 0.5s ease;">
        <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(to bottom, transparent 40%, rgba(0,0,0,0.8) 100%);">
          <div class="position-absolute top-0 end-0 m-3">
            <span class="badge px-3 py-2" style="background: {{ category.color }}; font-size: 0.85rem;">
              <i class="fas fa-box me-1"></i>{{ category.parts|length }} Parts
            </span>
          </div>
          <div class="position-absolute bottom-0 start-0 w-100 p-3">
            <div class="d-flex align-items-center gap-3">
              <div class="rounded-circle d-flex align-items-center justify-content-center" style="width: 55px; height: 55px; background: white;">
                <i class="fas fa-{{ category.icon }} fa-2x" style="color: {{ category.color }};"></i>
              </div>
              <div>
                <h5 class="text-white fw-bold mb-0">{{ category.name }}</h5>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card-body p-4" style="background: linear-gradient(to bottom, #ffffff, #f8f9fa);">
        <p class="text-muted small mb-3">{{ category.description }}</p>
        <div class="d-grid gap-2">
          <a href="{{ url_for('spare_parts_browse', category=category.id) }}" class="btn btn-lg" style="background: {{ category.color }}; color: white; border: none; border-radius: 12px; font-weight: 600;">
            <i class="fas fa-shopping-cart me-2"></i>View Parts
          </a>
        </div>
      </div>
      <div class="hover-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" style="background: linear-gradient(135deg, {{ category.color }}dd, {{ category.color }}aa); opacity: 0; transition: opacity 0.3s ease; pointer-events: none;">
        <div class="text-center text-white">
          <i class="fas fa-shopping-bag fa-4x mb-3"></i>
          <h4 class="fw-bold">Click to Browse</h4>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
  {% else %}
  <!-- Fallback static categories -->
  {% set parts_data = [
    {
      'name': 'Engine Components',
      'icon': 'engine',
      'color': '#0d6efd',
      'image': 'https://images.unsplash.com/photo-1486262715619-e3bc71683773?w=600&q=80',
      'parts_list': ['Pistons', 'Crankshafts', 'Timing Belts', 'Gaskets', 'Valves', 'Cylinder Heads'],
      'price_range': '₹500 - ₹25,000',
      'stock': 450
    },
    {
      'name': 'Brake Systems',
      'icon': 'circle-notch',
      'color': '#dc3545',
      'image': 'https://images.unsplash.com/photo-1625047509168-a7026f36de04?w=600&q=80',
      'parts_list': ['Brake Pads', 'Brake Rotors', 'Calipers', 'Brake Drums', 'Master Cylinders', 'Brake Lines'],
      'price_range': '₹800 - ₹15,000',
      'stock': 380
    },
    {
      'name': 'Filters & Fluids',
      'icon': 'filter',
      'color': '#198754',
      'image': 'https://images.unsplash.com/photo-1632823469620-fef1e4c85ab0?w=600&q=80',
      'parts_list': ['Oil Filters', 'Air Filters', 'Cabin Filters', 'Engine Oil', 'Coolants', 'Brake Fluid'],
      'price_range': '₹200 - ₹3,500',
      'stock': 620
    },
    {
      'name': 'Electrical Parts',
      'icon': 'bolt',
      'color': '#ffc107',
      'image': 'https://images.unsplash.com/photo-1621939514649-280e2ee25f60?w=600&q=80',
      'parts_list': ['Batteries', 'Alternators', 'Starters', 'Spark Plugs', 'Sensors', 'Wiring Harness'],
      'price_range': '₹300 - ₹18,000',
      'stock': 540
    },
    {
      'name': 'Suspension Parts',
      'icon': 'car-side',
      'color': '#6f42c1',
      'image': 'https://images.unsplash.com/photo-1487754180451-c456f719a1fc?w=600&q=80',
      'parts_list': ['Shock Absorbers', 'Struts', 'Springs', 'Control Arms', 'Ball Joints', 'Bushings'],
      'price_range': '₹600 - ₹12,000',
      'stock': 320
    },
    {
      'name': 'Transmission',
      'icon': 'cog',
      'color': '#fd7e14',
      'image': 'https://images.unsplash.com/photo-1580273916550-e323be2ae537?w=600&q=80',
      'parts_list': ['Clutch Kits', 'Gearboxes', 'Torque Converters', 'Drive Shafts', 'CV Joints', 'Transmission Fluid'],
      'price_range': '₹1,000 - ₹35,000',
      'stock': 280
    },
    {
      'name': 'Body & Exterior',
      'icon': 'car',
      'color': '#20c997',
      'image': 'https://images.unsplash.com/photo-1615906655593-ad0386982a0f?w=600&q=80',
      'parts_list': ['Bumpers', 'Fenders', 'Headlights', 'Taillights', 'Mirrors', 'Windshields'],
      'price_range': '₹800 - ₹22,000',
      'stock': 410
    },
    {
      'name': 'Interior Parts',
      'icon': 'couch',
      'color': '#0dcaf0',
      'image': 'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=600&q=80',
      'parts_list': ['Seat Covers', 'Dashboard Parts', 'Door Panels', 'Floor Mats', 'Steering Wheels', 'Trim Pieces'],
      'price_range': '₹400 - ₹18,000',
      'stock': 560
    }
  ] %}

  {% for part in parts_data %}
  <div class="col-md-6 col-lg-3">
    <div class="parts-category-card card h-100 border-0 shadow-lg position-relative overflow-hidden" style="transition: all 0.4s ease; cursor: pointer; border-radius: 20px;">
      <!-- Image Section -->
      <div class="position-relative overflow-hidden" style="height: 240px;">
        <img src="{{ part.image }}" alt="{{ part.name }}" class="img-fluid w-100 h-100" style="object-fit: cover; transition: transform 0.5s ease;">
        <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(to bottom, transparent 40%, rgba(0,0,0,0.8) 100%);">
          <div class="position-absolute top-0 end-0 m-3">
            <span class="badge px-3 py-2" style="background: {{ part.color }}; font-size: 0.85rem;">
              <i class="fas fa-box me-1"></i>{{ part.stock }} in Stock
            </span>
          </div>
          <div class="position-absolute bottom-0 start-0 w-100 p-3">
            <div class="d-flex align-items-center gap-3">
              <div class="rounded-circle d-flex align-items-center justify-content-center" style="width: 55px; height: 55px; background: white;">
                <i class="fas fa-{{ part.icon }} fa-2x" style="color: {{ part.color }};"></i>
              </div>
              <div>
                <h5 class="text-white fw-bold mb-1">{{ part.name }}</h5>
                <small class="text-white" style="opacity: 0.95;">{{ part.price_range }}</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Content Section -->
      <div class="card-body p-4" style="background: linear-gradient(to bottom, #ffffff, #f8f9fa);">
        <div class="mb-3">
          <h6 class="fw-bold mb-2" style="color: {{ part.color }};">
            <i class="fas fa-list-ul me-2"></i>Available Items:
          </h6>
          <div class="d-flex flex-wrap gap-2">
            {% for item in part.parts_list[:4] %}
            <span class="badge bg-light text-dark small border">{{ item }}</span>
            {% endfor %}
            {% if part.parts_list|length > 4 %}
            <span class="badge bg-light text-dark small border">+{{ part.parts_list|length - 4 }} more</span>
            {% endif %}
          </div>
        </div>

        <div class="d-grid gap-2 mt-3">
          <a href="{{ url_for('book', doctor_id=loop.index) }}" class="btn btn-lg" style="background: {{ part.color }}; color: white; border: none; border-radius: 12px; font-weight: 600;">
            <i class="fas fa-shopping-cart me-2"></i>Order Parts
          </a>
          <a href="tel:+919997612579" class="btn btn-outline-secondary btn-sm" style="border-radius: 10px;">
            <i class="fas fa-phone me-2"></i>Call for Details
          </a>
        </div>
      </div>

      <!-- Hover Effect Overlay -->
      <div class="hover-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" style="background: linear-gradient(135deg, {{ part.color }}dd, {{ part.color }}aa); opacity: 0; transition: opacity 0.3s ease; pointer-events: none;">
        <div class="text-center text-white">
          <i class="fas fa-shopping-bag fa-4x mb-3"></i>
          <h4 class="fw-bold">Click to Order</h4>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
  {% endif %}
</div>

<!-- Featured Parts Section -->
{% if not selected_category and parts %}
<div class="row g-4 mb-5">
  <div class="col-12">
    <h3 class="fw-bold mb-4">
      <i class="fas fa-star me-2 text-warning"></i>Featured Parts & Bestsellers
    </h3>
  </div>

  {% for part in parts[:8] %}
  <div class="col-md-6 col-lg-4 col-xl-3">
    <div class="card h-100 border-0 shadow-sm hover-lift" style="border-radius: 15px; transition: all 0.3s;">
      <div class="position-relative overflow-hidden" style="height: 200px; border-radius: 15px 15px 0 0;">
        <img src="{{ part.image_url }}" alt="{{ part.name }}" class="img-fluid w-100 h-100" style="object-fit: cover;">
        {% if part.is_oem %}
        <span class="badge bg-success position-absolute top-0 start-0 m-2">
          <i class="fas fa-certificate me-1"></i>OEM
        </span>
        {% endif %}
        {% if part.stock_quantity < 10 and part.stock_quantity > 0 %}
        <span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2">
          <i class="fas fa-exclamation me-1"></i>Low Stock
        </span>
        {% elif part.stock_quantity == 0 %}
        <span class="badge bg-danger position-absolute top-0 end-0 m-2">Out of Stock</span>
        {% endif %}
      </div>
      <div class="card-body p-3">
        <small class="text-muted d-block mb-1">{{ part.category.name }}</small>
        <h6 class="fw-bold mb-2 text-truncate" title="{{ part.name }}">{{ part.name }}</h6>
        <p class="text-muted small mb-1"><i class="fas fa-tag me-1"></i><strong>{{ part.brand }}</strong></p>
        <p class="text-muted small mb-2"><i class="fas fa-barcode me-1"></i>{{ part.part_number }}</p>
        <p class="text-success small mb-2"><i class="fas fa-car me-1"></i>{{ part.compatible_brands }}</p>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="h5 text-primary mb-0">₹{{ "{:,.0f}".format(part.price) }}</span>
          <span class="badge bg-light text-dark"><i class="fas fa-box me-1"></i>{{ part.stock_quantity }}</span>
        </div>
        <div class="d-grid gap-2">
          <a href="{{ url_for('order_part', part_id=part.id) }}" class="btn btn-primary btn-sm" {% if part.stock_quantity == 0 %}disabled{% endif %} style="border-radius: 10px;">
            <i class="fas fa-shopping-cart me-2"></i>{% if part.stock_quantity == 0 %}Out of Stock{% else %}Order Now{% endif %}
          </a>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endif %}

<!-- Individual Parts Listing (when category selected) -->
{% if parts and selected_category %}
<div class="row g-4 mb-5">
  <div class="col-12">
    <h3 class="fw-bold mb-4">
      <i class="fas fa-boxes me-2 text-primary"></i>Available Parts
      <span class="badge bg-primary ms-2">{{ parts|length }} items</span>
    </h3>
  </div>

  {% for part in parts %}
  <div class="col-md-6 col-lg-4 col-xl-3">
    <div class="card h-100 border-0 shadow-sm hover-lift" style="border-radius: 15px; transition: all 0.3s;">
      <div class="position-relative overflow-hidden" style="height: 200px; border-radius: 15px 15px 0 0;">
        <img src="{{ part.image_url }}" alt="{{ part.name }}" class="img-fluid w-100 h-100" style="object-fit: cover;">
        {% if part.is_oem %}
        <span class="badge bg-success position-absolute top-0 start-0 m-2">OEM</span>
        {% endif %}
        {% if part.stock_quantity < 10 %}
        <span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2">Low Stock</span>
        {% elif part.stock_quantity == 0 %}
        <span class="badge bg-danger position-absolute top-0 end-0 m-2">Out of Stock</span>
        {% endif %}
      </div>
      <div class="card-body p-3">
        <h6 class="fw-bold mb-2 text-truncate">{{ part.name }}</h6>
        <p class="text-muted small mb-2">Brand: <strong>{{ part.brand }}</strong></p>
        <p class="text-muted small mb-2">Code: {{ part.part_number }}</p>
        <p class="text-success small mb-2"><i class="fas fa-car me-1"></i>{{ part.compatible_brands }}</p>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="h5 text-primary mb-0">₹{{ "{:,.0f}".format(part.price) }}</span>
          <span class="badge bg-light text-dark">Stock: {{ part.stock_quantity }}</span>
        </div>
        <div class="d-grid gap-2">
          <a href="{{ url_for('order_part', part_id=part.id) }}" class="btn btn-primary btn-sm" {% if part.stock_quantity == 0 %}disabled{% endif %}>
            <i class="fas fa-shopping-cart me-2"></i>Order Now
          </a>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endif %}

<!-- Legacy mechanic listings (hidden by default, for backwards compatibility) -->
<div class="legacy-mechanics" style="display: none;">
  <div class="row g-4">
    {% for d in doctors %}
      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-lg border-0" style="transition: all 0.3s; border-radius: 16px; overflow: hidden;">
          <div class="card-header text-white text-center py-3" style="background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);">
            <div class="mechanic-avatar mx-auto mb-2" style="width: 90px; height: 90px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
              <i class="fas fa-user-cog fa-3x text-primary"></i>
            </div>
            <h5 class="mb-0 fw-bold">{{ d.name }}</h5>
          </div>
          <div class="card-body p-4">
            <div class="mb-3">
              <span class="badge bg-primary px-3 py-2 rounded-pill"><i class="fas fa-wrench me-1"></i>{{ d.specialization }}</span>
            </div>
            <p class="mb-3 small text-muted">
              <i class="fas fa-calendar-check text-success me-2"></i>Available Slots: <strong class="text-primary">{{ doc_avail[d.id]|length }}</strong> (Next 7 days)
            </p>
            <div class="d-grid gap-2">
              <a class="btn btn-primary" href="{{ url_for('book', doctor_id=d.id) }}">
                <i class="fas fa-calendar-check me-2"></i>Book Service
              </a>
              <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('doctor_availability') }}">
                <i class="fas fa-clock me-1"></i>View Schedule
              </a>
            </div>
          </div>
        </div>
      </div>
    {% else %}
      <div class="col-12">
        <div class="alert alert-warning">
          <i class="fas fa-exclamation-triangle me-2"></i>No parts available. Please contact us for custom orders.
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<!-- Call to Action Section -->
<div class="cta-section mt-5">
  <div class="card border-0 shadow-lg" style="background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%); border-radius: 20px; overflow: hidden;">
    <div class="card-body p-5">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h3 class="text-white fw-bold mb-3">
            <i class="fas fa-headset me-3" style="color: #fbbf24;"></i>Need Help Finding the Right Part?
          </h3>
          <p class="text-white mb-0" style="font-size: 1.1rem; opacity: 0.95;">
            Our expert team is here to help you find the perfect spare parts for your vehicle. 
            Get professional advice, genuine parts warranty, and free installation guidance.
          </p>
        </div>
        <div class="col-md-4 text-md-end mt-3 mt-md-0">
          <a href="tel:+919997612579" class="btn btn-light btn-lg fw-bold mb-2 d-block" style="border-radius: 15px;">
            <i class="fas fa-phone me-2"></i>+91 9997612579
          </a>
          <small class="text-white d-block"><i class="fas fa-clock me-2"></i>Open 7 Days: 9:00 AM - 7:00 PM</small>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .spare-parts-hero {
    animation: fadeInUp 0.8s ease;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .parts-category-card {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid transparent;
  }
  
  .parts-category-card:hover {
    transform: translateY(-15px) scale(1.02);
    box-shadow: 0 25px 60px rgba(13, 110, 253, 0.25) !important;
    border-color: var(--bs-primary);
  }

  .parts-category-card:hover img {
    transform: scale(1.15);
  }

  .parts-category-card:hover .hover-overlay {
    opacity: 1 !important;
  }

  .search-filter-section .input-group {
    box-shadow: 0 4px 20px rgba(13, 110, 253, 0.15);
    border-radius: 12px;
    overflow: hidden;
  }

  .search-filter-section .form-control:focus {
    box-shadow: none;
    border-color: transparent;
  }

  .badge {
    transition: all 0.3s ease;
  }

  .badge:hover {
    transform: scale(1.05);
  }

  .cta-section {
    animation: fadeIn 1s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Mobile Responsive */
  @media (max-width: 768px) {
    .spare-parts-hero {
      padding: 40px 20px !important;
    }

    .spare-parts-hero h1 {
      font-size: 1.75rem;
    }

    .parts-category-card {
      margin-bottom: 1rem;
    }
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  /* Custom animations for staggered appearance */
  .parts-category-card {
    animation: slideInUp 0.6s ease forwards;
    opacity: 0;
  }

  .parts-category-card:nth-child(1) { animation-delay: 0.1s; }
  .parts-category-card:nth-child(2) { animation-delay: 0.2s; }
  .parts-category-card:nth-child(3) { animation-delay: 0.3s; }
  .parts-category-card:nth-child(4) { animation-delay: 0.4s; }
  .parts-category-card:nth-child(5) { animation-delay: 0.5s; }
  .parts-category-card:nth-child(6) { animation-delay: 0.6s; }
  .parts-category-card:nth-child(7) { animation-delay: 0.7s; }
  .parts-category-card:nth-child(8) { animation-delay: 0.8s; }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(40px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Pulse effect for stock badges */
  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }

  .parts-category-card:hover .badge {
    animation: pulse 1.5s infinite;
  }

  /* Interactive buttons */
  .btn {
    transition: all 0.3s ease;
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }

  .btn:active {
    transform: translateY(0);
  }

  /* Featured parts hover effects */
  .hover-lift {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .hover-lift:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 50px rgba(13,110,253,0.2) !important;
  }

  .hover-lift:hover img {
    transform: scale(1.1);
  }

  .hover-lift img {
    transition: transform 0.5s ease;
  }

  /* Badge animations */
  .badge {
    animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.8);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Search bar focus effects */
  .search-filter-section .form-control:focus {
    transform: scale(1.02);
    box-shadow: 0 8px 30px rgba(13,110,253,0.25) !important;
  }

  /* Category card image parallax effect */
  .parts-category-card:hover img {
    transform: scale(1.2) rotate(2deg);
  }

  /* Loading animation for images */
  img {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
  }

  @keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  img[src] {
    animation: none;
    background: none;
  }
</style>

{% endblock %}